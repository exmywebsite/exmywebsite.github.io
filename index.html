<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from dapp.bscbets.io/betting/a/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Nov 2022 12:01:40 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
	<title>CHARIZARD - Betting Group A</title>
	<meta name="description" content="">
	<meta charset="UTF-8">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" href="css/style9bf3.css">
	<link rel="shortcut icon" href="img/logo-charizard.png">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<script src="../../../cdn.ethers.io/lib/ethers-5.6.umd.min.js" type="application/javascript"></script>
</head>

<style class="HelveticaNeueCyr">
	@import url('https://fonts.cdnfonts.com/css/helvetica-neue-9');
* {
	padding: 0px;
	margin: 0px;
	border: 0px;
}
</style>

<body>
	<div class="wrapper _loaded ">
		<header class="header">
			<div class="header__row">
				<div class="header__logo">
					<img src="img/logo/logo-charizard.png" alt="" style="width: 100px;">
					<a href="#"></a>
				</div>
				<div class="header__menu menu">
					<div class="menu__icon icon-menu">
						<span></span>
						<span></span>
						<span></span>
					</div>
					<nav class="menu__body">
					</nav>
				</div>
				<div class="header__buttons header-buttons">
					<a href="#" class="btn header-btn header-btn_orange">Uniswap</a>
					<a href="#" class="btn header-btn header-btn_blue connectMetamask">Connect Wallet</a>
					<div data-da="header__row,1,600" class="header-buttons__switcher"></div>
				</div>
			</div>
		</header>
		<div class="left-menu">
			<ul data-da="menu__body,1,1024" class="menu__list">
				<li><a href="#" class="menu__link">Welcome</a></li>
				<li><a href="#" class="menu__link _active">Betting</a></li>
				<li><a href="#" class="menu__link">Charizard Winner</a></li>
				<li><a href="#" class="menu__link">Prediction JACKPOT</a></li>
				<li><a href="#" class="menu__link">Charizard Pool</a></li>

			</ul>
		</div>
		<main class="page">
			<section class="blocktitle">
				<div class="_container">
					<a href="#"><img style="padding-top: 50px" src="img/logo/charizard.png" alt=""></a>
				</div>
			</section>
			<section class="groups">
				<div class="_container">
					<h3 class="groups__title">Group A</h3>
					<div class="groups__row">
						<div class="groups__block groups-block">
							<div class="groups-block__row">
								<div class="groups-block__form groups-block-form">
									<div class="groups-block-form__title">Enter your bet amount</div>
									<div class="groups-block-form__block">
										<input type="number" id="bet" autocomplete="off" name="bet">
										<a href="#" class="groups-block-form__btn">Max</a>
									</div>
									<a href="#" class="groups-block-form__btn">Bet</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-1.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win1</a>
								</div>
								<div class="groups-block__dateblock">
									<div class="groups-block__date">
										<p>25 November</p>
										<p>16 UTC</p>
									</div>
									<a href="#" class="groups-block__bet">Draw</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-2.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win2</a>
								</div>
							</div>
						</div>
						<div class="groups__block groups-block">
							<div class="groups-block__row">
								<div class="groups-block__form groups-block-form">
									<div class="groups-block-form__title">Enter your bet amount</div>
									<div class="groups-block-form__block">
										<input type="number" id="bet" autocomplete="off" name="bet">
										<a href="#" class="groups-block-form__btn">Max</a>
									</div>
									<a href="#" class="groups-block-form__btn">Bet</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-3.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win1</a>
								</div>
								<div class="groups-block__dateblock">
									<div class="groups-block__date">
										<p>21 November</p>
										<p>16 UTC</p>
									</div>
									<a href="#" class="groups-block__bet">Draw</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-4.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win2</a>
								</div>
							</div>
						</div>
						<div class="groups__block groups-block">
							<div class="groups-block__row">
								<div class="groups-block__form groups-block-form">
									<div class="groups-block-form__title">Enter your bet amount</div>
									<div class="groups-block-form__block">
										<input type="number" id="bet" autocomplete="off" name="bet">
										<a href="#" class="groups-block-form__btn">Max</a>
									</div>
									<a href="#" class="groups-block-form__btn">Bet</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-4.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win1</a>
								</div>
								<div class="groups-block__dateblock">
									<div class="groups-block__date">
										<p>29 November</p>
										<p>15 UTC</p>
									</div>
									<a href="#" class="groups-block__bet">Draw</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-3.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win2</a>
								</div>
							</div>
						</div>
						<div class="groups__block groups-block">
							<div class="groups-block__row">
								<div class="groups-block__form groups-block-form">
									<div class="groups-block-form__title">Enter your bet amount</div>
									<div class="groups-block-form__block">
										<input type="number" id="bet" autocomplete="off" name="bet">
										<a href="#" class="groups-block-form__btn">Max</a>
									</div>
									<a href="#" class="groups-block-form__btn">Bet</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-2.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win2</a>
								</div>
								<div class="groups-block__dateblock">
									<div class="groups-block__date">
										<p>25 November</p>
										<p>13 UTC</p>
									</div>
									<a href="#" class="groups-block__bet">Draw</a>
								</div>
								<div class="groups-block__contryflag">
									<div class="groups-block__country"></div>
									<div class="groups-block__flag">
										<picture>
											<img src="img/item/dragon-1.jpg" alt="">
										</picture>
									</div>
									<a href="#" class="groups-block__bet">Win1</a>
								</div>
							</div>
						</div>
						
					</div>
					<div class="pagination">
						<div class="pagination__row">
							<p class="pagination__title">Total 10 matchs</p>
							<div class="pagination__pages">
								<a href="#" class="pagination__prev _disabled"></a>
								<a href="#" class="pagination__page _active">A</a>
								<a href="#" class="pagination__page">B</a>
								<a href="#" class="pagination__page">C</a>
								<a href="#" class="pagination__page">D</a>
								<a href="#" class="pagination__page">E</a>
								<a href="#" class="pagination__page">F</a>
								<a href="#" class="pagination__page">G</a>
								<a href="#" class="pagination__page">H</a>
								<a href="#" class="pagination__next"></a>
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>
		<footer class="footer">
			<div class="footer__left">
				<p>Social networks</p>
				<div class="footer__icons">
					<a href="#" class="footer__tg" target="_blank"></a>
					<a href="#" class="footer__tw" target="_blank"></a>
				</div>
			</div>
			<div class="footer__center">
				<p>Copyright © 2022, All Rights Reserved by CHARIZARD</p>
			</div>
			<div class="footer__right"></div>
		</footer>
	</div>
	<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
	<script src="../../js/vendorsc4ca.js?1"></script>
	<script src="../../js/appc4ca.js?1"></script>
	<script src="../../js/customc81e.js?2"></script>
	<!-- <script src="/js/wallet.js"></script> -->
	<script>
		const connectMetamask = document.querySelector('.connectMetamask');
		const btnBet = document.querySelectorAll('.groups-block-form__btn'); //max, bet
		const selectGame = document.querySelectorAll('.groups-block__bet');
		const inputsBet = document.querySelectorAll('#bet');
		//Далее поменять адреса контрактов последовательно от 1 до 6 группы ставок на этой странице
		const BET_CONTRACT = ["0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
			"0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
			"0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
			"0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
			"0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
			"0xbFE5e716FE8a302eb4bD3B1390Ac571c8a7A87F9",
		];
		const BET_ABI = [{ "inputs": [{ "internalType": "uint256", "name": "numberOfPools_", "type": "uint256" }, { "internalType": "address[]", "name": "wallets_", "type": "address[]" }, { "internalType": "uint256[]", "name": "percentages_", "type": "uint256[]" }], "stateMutability": "nonpayable", "type": "constructor" }, { "inputs": [{ "internalType": "uint256", "name": "prod1", "type": "uint256" }], "name": "PRBMath__MulDivFixedPointOverflow", "type": "error" }, { "inputs": [{ "internalType": "uint256", "name": "prod1", "type": "uint256" }, { "internalType": "uint256", "name": "denominator", "type": "uint256" }], "name": "PRBMath__MulDivOverflow", "type": "error" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "account", "type": "address" }], "name": "Paused", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "account", "type": "address" }], "name": "Unpaused", "type": "event" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "address", "name": "", "type": "address" }], "name": "balances", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "pool_", "type": "uint256" }], "name": "bet", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "pool_", "type": "uint256" }], "name": "close", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "closed", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "pool_", "type": "uint256" }], "name": "getNumberOfStakers", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "pool_", "type": "uint256" }, { "internalType": "uint256", "name": "index_", "type": "uint256" }], "name": "getStaker", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "pool_", "type": "uint256" }, { "internalType": "address", "name": "staker_", "type": "address" }], "name": "isStaker", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "numberOfPools", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "owner", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "pause", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "paused", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "recipients", "outputs": [{ "internalType": "address payable", "name": "wallet", "type": "address" }, { "internalType": "uint256", "name": "percentage", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "renounceOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address[]", "name": "wallets_", "type": "address[]" }, { "internalType": "uint256[]", "name": "percentages_", "type": "uint256[]" }], "name": "setRecipients", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "supplies", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "unpause", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "withdraw", "outputs": [], "stateMutability": "nonpayable", "type": "function" }];
		let account = '';
		let provider;
		let signer;
		let bet_id = Array();
		let group_id

		selectAddress();

		connectMetamask.addEventListener('click', () => {
			getAccount();
		});

		var count = 0;
		selectGame.forEach(node => {
			node.id = count++;
			node.addEventListener('click', () => {
				group_id = Math.floor(event.srcElement.id / 3);
				if (event.srcElement.innerText == 'Win1') {
					bet_id[group_id] = 0;
				} else if (event.srcElement.innerText == 'Draw') {
					bet_id[group_id] = 1;
				} else if (event.srcElement.innerText == 'Win2') {
					bet_id[group_id] = 2;
				}
			})
		});

		var betcount = 0;
		btnBet.forEach(node => {
			node.id = Math.floor(betcount++ / 2);
			node.addEventListener('click', () => {
				id = event.srcElement.id;
				if (event.srcElement.innerText == 'Max') {
					setMaxBalance(id);
				} else if (event.srcElement.innerText == 'Bet') {
					setBet(id, bet_id[id], inputsBet[id].value);
				} else {

				}
			})
		});

		async function setMaxBalance(id) {
			provider.getBalance(account).then((balance) => {
				const balanceInEth = ethers.utils.formatEther(balance) - 0.02;
				const inputsBet = document.querySelectorAll('#bet');
				inputsBet[id].value = balanceInEth;
			})
		}

		async function setBet(group, pool, bet) {
			if (pool < 0) { return; }
			if (group < 0) { return; }
			if (bet == 0) { return; }
			var contract = new ethers.Contract(BET_CONTRACT[group], BET_ABI, signer);
			var contractWithSigner = contract.connect(signer);
			const nonce = await provider.getTransactionCount(account);
			const gasFee = await provider.getGasPrice();
			await contractWithSigner.bet(parseInt(pool), {
				gasPrice: gasFee,
				nonce: nonce,
				value: ethers.utils.parseEther(bet)
			})
				.then(rawTxn => {
					transaction(rawTxn, gasFee, nonce);
				})
				.catch(err => console.log(err.reason));

		}
		async function transaction(rawTxn, gasFee, nonce) {
			console.log("...Submitting transaction with gas price of:", ethers.utils.formatUnits(gasFee, "gwei"), " - & nonce:", nonce)
			let signedTxn = (await provider).sendTransaction(rawTxn)
			let reciept = (await signedTxn).wait()
			console.log(reciept);
			if (reciept) {
				console.log("Transaction is successful!!!" + '\n' + "Transaction Hash:", (await signedTxn).hash + '\n' + "Block Number: " + (await reciept).blockNumber + '\n' + "Navigate to https://polygonscan.com/tx/" + (await signedTxn).hash, "to see your transaction")
			} else {
				console.log("Error submitting transaction")
			}
		}
		async function getAccount() {
			const { ethereum } = window;
			ethereum
				.request({ method: 'eth_requestAccounts' })
				.then(selectAddress())
				.catch((err) => {
					if (err.code === 4001) {
						console.log('Please connect to MetaMask.');
					} else {
						console.error(err);
					}
				});

			ethereum.on('chainChanged', async (chainId) => {
				console.log(`chainChanged >> ${chainId}`)
				if (chainId != 97) {
					document.getElementById("btn_connect").innerText = 'Wrong network'
				} else {
					selectAddress()
				}

			});

			ethereum.on('accountsChanged', async () => {
				selectAddress()
			})

			ethereum.on('disconnect', (error) => {
				account = ''
				document.getElementById("btn_connect").innerText = 'Connect Wallet'
			});
		}

		async function selectAddress() {
			var connected = ethereum && ethereum.isMetaMask
			var accounts = await ethereum.request({ method: 'eth_accounts' })
			console.log(accounts)
			if (accounts.length === 0) {
				connectMetamask.innerText = 'Connect Wallet'
			} else {
				const networkId = await ethereum.request({ method: 'eth_chainId' });
				if (networkId != 97) {
					await window.ethereum.request({
						jsonrpc: '2.0',
						method: 'wallet_switchEthereumChain',
						params: [{ chainId: '0x61' }]
					});
				}
				if (accounts[0] == account) {
					connectMetamask.innerText = account.substring(0, 6) + ' ... ' + account.substring(account.length - 4)
				} else {
					account = accounts[0];
					connectMetamask.innerText = account.substring(0, 6) + ' ... ' + account.substring(account.length - 4)
				}
				provider = new ethers.providers.Web3Provider(window.ethereum);
				signer = provider.getSigner();
			}
		}

		async function setBetContract() {
			contract = new ethers.Contract(BET_CONTRACT, BET_ABI, signer);
			contractWithSigner = contract.connect(signer);
		}
	</script>

</body>

<!-- Mirrored from dapp.bscbets.io/betting/a/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Nov 2022 12:01:44 GMT -->

</html>
